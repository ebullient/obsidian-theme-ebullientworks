:root {
  --checkbox-checked: var(--green-3);
  --checkbox-deferred: var(--blue-3);
  --checkbox-important: var(--pink-4);
  --checkbox-review: var(--green-4);
  --checkbox-in-progress: var(--teal-3);
  --checkbox-question: var(--yellow-3);
}
.theme-dark {
  --checkbox-cancelled: var(--gray-dark-3);
  --checkbox-hover: var(--gray-dark-2);
}
.theme-light {
  --checkbox-cancelled: var(--gray-dark-1);
  --checkbox-hover: var(--gray-light-2);
}

body:not(.ebullientworks-nix-checkbox) {
  /* '✓' for completed task ('- [x]') */
  /* '-' for cancelled task ('- [-]') */
  /* '>' for deferred task ('- [>]') */
  /* '?' for question/more info task ('- [?]') */
  /* 'R' for PR info task ('- [R]') */
  /* '!' for important task ('- [!]') */
  /* "/" Half done */
  /* text style tasks that should still have readable text */
  /* text style for important task ('- [!]') */
  .markdown-preview-view {
    ul {
      margin-inline-start: 0px;
      margin-inline-end: 0px;
      padding-inline-start: 20px;
    }
  }
  .mobile {
    .markdown-preview-view {
      ol,
      ul {
        display: block;
        line-height: var(--line-height);
      }
    }
  }

  .markdown-source-view.mod-cm6 input.task-list-item-checkbox,
  .markdown-preview-view input.task-list-item-checkbox {
    -webkit-appearance: none;
    box-sizing: border-box;
    border: 1px solid var(--text-normal);
    position: relative;
    width: 13px;
    height: 13px;
    margin: 0;
    margin-right: 4px;
    margin-bottom: 1px;
    transition: background-color 200ms ease-out 0s;
    cursor: pointer;
    filter: none;
    border-radius: 2px;
  }
  .markdown-source-view.mod-cm6 input.task-list-item-checkbox:checked::before,
  .markdown-preview-view input.task-list-item-checkbox:checked::before {
    position: absolute;
    text-align: center;
    font-weight: 600;
    line-height: 12px;
    font-size: 12px;
    left: 1px;
    right: 1px;
  }

  .markdown-preview-view ul > li.task-list-item {
    font-weight: normal;
    color: var(--text-normal);
  }
  .markdown-source-view.mod-cm6 input.task-list-item-checkbox[data-task="X"]::before,
  .markdown-source-view.mod-cm6 input.task-list-item-checkbox[data-task="x"]::before,
  .markdown-preview-view ul > li[data-task=X] > input.task-list-item-checkbox:checked::before,
  .markdown-preview-view ul > li[data-task=X] > p > input.task-list-item-checkbox:checked::before,
  .markdown-preview-view ul > li[data-task=x] > input.task-list-item-checkbox:checked::before,
  .markdown-preview-view ul > li[data-task=x] > p > input.task-list-item-checkbox:checked::before {
    content: "✓";
    color: var(--checkbox-checked);
  }
  .markdown-source-view.mod-cm6 input.task-list-item-checkbox[data-task="X"],
  .markdown-source-view.mod-cm6 input.task-list-item-checkbox[data-task="x"],
  .markdown-preview-view ul > li[data-task=X] > input.task-list-item-checkbox,
  .markdown-preview-view ul > li[data-task=X] > p > input.task-list-item-checkbox,
  .markdown-preview-view ul > li[data-task=x] > input.task-list-item-checkbox,
  .markdown-preview-view ul > li[data-task=x] > p > input.task-list-item-checkbox {
    border-color: var(--checkbox-checked);
    color: var(--checkbox-checked);
  }

  .markdown-source-view.mod-cm6 input.task-list-item-checkbox[data-task="-"]::before,
  .markdown-preview-view ul > li[data-task="-"] > input.task-list-item-checkbox:checked::before,
  .markdown-preview-view ul > li[data-task="-"] > p > input.task-list-item-checkbox:checked::before {
    content: "−";
    color: var(--checkbox-cancelled);
  }
  .markdown-source-view.mod-cm6 input.task-list-item-checkbox[data-task="-"],
  .markdown-preview-view ul > li[data-task="-"] > input.task-list-item-checkbox,
  .markdown-preview-view ul > li[data-task="-"] > p > input.task-list-item-checkbox {
    border-color: var(--checkbox-cancelled);
    color: var(--checkbox-cancelled);
  }

  .markdown-source-view.mod-cm6 input.task-list-item-checkbox[data-task=">"]::before,
  .markdown-preview-view ul > li[data-task=">"] > input.task-list-item-checkbox:checked::before,
  .markdown-preview-view ul > li[data-task=">"] > p > input.task-list-item-checkbox:checked::before {
    content: ">";
    color: var(--checkbox-deferred);
  }
  .markdown-source-view.mod-cm6 input.task-list-item-checkbox[data-task=">"],
  .markdown-preview-view ul > li[data-task=">"] > input.task-list-item-checkbox,
  .markdown-preview-view ul > li[data-task=">"] > p > input.task-list-item-checkbox {
    border-color: var(--checkbox-deferred);
    color: var(--checkbox-deferred);
  }

  .markdown-source-view.mod-cm6 input.task-list-item-checkbox[data-task="?"]::before,
  .markdown-preview-view ul > li[data-task="?"] > input.task-list-item-checkbox:checked::before,
  .markdown-preview-view ul > li[data-task="?"] > p > input.task-list-item-checkbox:checked::before {
    content: "?";
    color: var(--checkbox-question);
  }
  .markdown-source-view.mod-cm6 input.task-list-item-checkbox[data-task="?"],
  .markdown-preview-view ul > li[data-task="?"] > input.task-list-item-checkbox,
  .markdown-preview-view ul > li[data-task="?"] > p > input.task-list-item-checkbox {
    border-color: var(--checkbox-question);
    color: var(--checkbox-question);
  }

  .markdown-source-view.mod-cm6 input.task-list-item-checkbox[data-task=R]::before,
  .markdown-preview-view ul > li[data-task=R] > input.task-list-item-checkbox:checked::before,
  .markdown-preview-view ul > li[data-task=R] > p > input.task-list-item-checkbox:checked::before {
    content: "👀";
    font-size: 0.7em;
    color: var(--checkbox-review);
  }
  .markdown-source-view.mod-cm6 input.task-list-item-checkbox[data-task=R],
  .markdown-preview-view ul > li[data-task=R] > input.task-list-item-checkbox,
  .markdown-preview-view ul > li[data-task=R] > p > input.task-list-item-checkbox {
    border-color: var(--checkbox-review);
    color: var(--checkbox-review);
  }

  .markdown-source-view.mod-cm6 input.task-list-item-checkbox[data-task="!"]::before,
  .markdown-preview-view ul > li[data-task="!"] > input.task-list-item-checkbox:checked::before,
  .markdown-preview-view ul > li[data-task="!"] > p > input.task-list-item-checkbox:checked::before {
    content: "‼️";
    color: var(--checkbox-important);
  }
  .markdown-source-view.mod-cm6 input.task-list-item-checkbox[data-task="!"],
  .markdown-preview-view ul > li[data-task="!"] > input.task-list-item-checkbox,
  .markdown-preview-view ul > li[data-task="!"] > p > input.task-list-item-checkbox {
    border-color: var(--checkbox-important);
    color: var(--checkbox-important);
  }

  .markdown-source-view.mod-cm6 input.task-list-item-checkbox[data-task="/"]::before,
  .markdown-preview-view ul > li[data-task="/"] > input.task-list-item-checkbox:checked::before,
  .markdown-preview-view ul > li[data-task="/"] > p > input.task-list-item-checkbox:checked::before {
    content: " ";
    font-family: var(--font-monospace);
    line-height: 18px;
  }
  .markdown-source-view.mod-cm6 input.task-list-item-checkbox[data-task="/"],
  .markdown-preview-view ul > li[data-task="/"] > input.task-list-item-checkbox,
  .markdown-preview-view ul > li[data-task="/"] > p > input.task-list-item-checkbox {
    border-color: var(--checkbox-in-progress);
    background: linear-gradient(135deg, transparent 50%, var(--checkbox-in-progress) 50%);
  }
  .markdown-source-view.mod-cm6 input.task-list-item-checkbox + span,
  .markdown-source-view.mod-cm6 input.task-list-item-checkbox + span + span,
  .markdown-preview-view ul > li.task-list-item.is-checked {
    color: var(--text-normal);
    text-decoration: none;
  }
  .markdown-source-view.mod-cm6 input.task-list-item-checkbox[data-task="!"] + span,
  .markdown-source-view.mod-cm6 input.task-list-item-checkbox[data-task="!"] + span + span,
  .markdown-preview-view ul > li[data-task="!"].task-list-item.is-checked {
    font-weight: 900;
  }
  .markdown-source-view.mod-cm6 input.task-list-item-checkbox[data-task="-"] + span,
  .markdown-source-view.mod-cm6 input.task-list-item-checkbox[data-task="-"] + span + span,
  .markdown-preview-view ul > li[data-task="-"].task-list-item.is-checked {
    color: var(--checkbox-cancelled);
    text-decoration: line-through;
  }
  .markdown-source-view.mod-cm6 input.task-list-item-checkbox:hover,
  .markdown-source-view.mod-cm6 input.task-list-item-checkbox:checked:hover,
  .markdown-preview-view li[data-task=X] > input.task-list-item-checkbox:checked:hover,
  .markdown-preview-view li[data-task=X] > p > input.task-list-item-checkbox:checked:hover,
  .markdown-preview-view li[data-task=x] > input.task-list-item-checkbox:checked:hover,
  .markdown-preview-view li[data-task=x] > p > input.task-list-item-checkbox:checked:hover,
  .markdown-preview-view li[data-task="-"] > input.task-list-item-checkbox:checked:hover,
  .markdown-preview-view li[data-task="-"] > p > input.task-list-item-checkbox:checked:hover,
  .markdown-preview-view li[data-task=">"] > input.task-list-item-checkbox:checked:hover,
  .markdown-preview-view li[data-task=">"] > p > input.task-list-item-checkbox:checked:hover,
  .markdown-preview-view li[data-task="?"] > input.task-list-item-checkbox:checked:hover,
  .markdown-preview-view li[data-task="?"] > p > input.task-list-item-checkbox:checked:hover,
  .markdown-preview-view li[data-task=R] > input.task-list-item-checkbox:checked:hover,
  .markdown-preview-view li[data-task=R] > p > input.task-list-item-checkbox:checked:hover,
  .markdown-preview-view li[data-task="/"] > input.task-list-item-checkbox:checked:hover,
  .markdown-preview-view li[data-task="/"] > p > input.task-list-item-checkbox:checked:hover,
  .markdown-preview-view li[data-task="!"] > input.task-list-item-checkbox:checked:hover,
  .markdown-preview-view li[data-task="!"] > p > input.task-list-item-checkbox:checked:hover,
  .markdown-preview-view input.task-list-item-checkbox:hover {
    color: var(--text-on-accent);
    background-color: var(--checkbox-hover);
    border-color: var(--text-on-accent);
  }
}
