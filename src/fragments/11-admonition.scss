:root {
  --admonition-color: var(--secondary-accent-4-rgb);
  --admonition-warning: 234, 175, 0; // yellow-3
  --admonition-success: 139, 167, 145; // green-3
  --admonition-note: 180, 209, 232; // blue-1
  --admonition-info: 111, 166, 211; // blue-3
  --admonition-quote: 53, 120, 175; // blue-4
  --admonition-tip: 134, 196, 193; // teal-2
  --admonition-question: 89, 174, 170; // teal-3
  --admonition-abstract: 216, 201, 213; // purple-1
  --admonition-bug: 180, 152, 175; // purple-3
  --admonition-example: 142, 103, 135; // purple-4
  --admonition-failure: 187, 79, 108; // pink-4
  --admonition-danger: 211, 141, 160; // pink-3
  --admonition-reference: 183, 183, 183; // gray
  --admonition-toc: 235, 235, 235; // gray-light-4
}
.theme-light {
  --admonition-toc: 203, 203, 203; // gray-light-2
}

@mixin admonition-color($rgb-color) {
  border-left: 0.15rem solid rgb($rgb-color);
  .admonition-title {
    background-color: rgba($rgb-color, 0.2);
    .admonition-title-icon {
      color: rgb($rgb-color);
    }
  }
}

.rendered-widget,
.markdown-rendered,
.markdown-preview-section {
  .callout[data-callout="abstract"],
  .callout[data-callout="summary"],
  .callout[data-callout="tldr"] {
    --callout-color: var(--admonition-abstract);
  }
  .callout[data-callout="info"],
  .callout[data-callout="todo"] {
    --callout-color: var(--admonition-info);
  }
  .callout[data-callout="tip"],
  .callout[data-callout="hint"],
  .callout[data-callout="important"] {
    --callout-color: var(--admonition-tip);
  }
  .callout[data-callout="success"],
  .callout[data-callout="check"],
  .callout[data-callout="done"] {
    --callout-color: var(--admonition-success);
  }
  .callout[data-callout="question"],
  .callout[data-callout="help"],
  .callout[data-callout="faq"] {
    --callout-color: var(--admonition-question);
  }
  .callout[data-callout="warning"],
  .callout[data-callout="caution"],
  .callout[data-callout="attention"] {
    --callout-color: var(--admonition-warning);
  }
  .callout[data-callout="failure"],
  .callout[data-callout="fail"],
  .callout[data-callout="missing"] {
    --callout-color: var(--admonition-failure);
  }
  .callout[data-callout="danger"],
  .callout[data-callout="error"] {
    --callout-color: var(--admonition-danger);
  }
  .callout[data-callout="bug"] {
    --callout-color: var(--admonition-bug);
  }
  .callout[data-callout="example"] {
    --callout-color: var(--admonition-example);
  }
  .callout[data-callout="excerpt"],
  .callout[data-callout="quote"],
  .callout[data-callout="cite"] {
    --callout-color: var(--admonition-quote);
  }
  .callout[data-callout="note"] {
    --callout-color: var(--admonition-note);
  }
  .callout[data-callout="reference"] {
    --callout-color: var(--admonition-reference);
  }
  .callout[data-callout="toc"] {
    --callout-color: var(--admonition-toc);
  }

  .admonition {
    @include admonition-color(var(--admonition-color));
    background-color: var(--background-primary-alt);
  }
  .admonition.admonition-note {
    @include admonition-color(var(--admonition-note));
  }
  .admonition.admonition-abstract {
    @include admonition-color(var(--admonition-abstract));
  }
  .admonition.admonition-info {
    @include admonition-color(var(--admonition-info));
  }
  .admonition.admonition-tip {
    @include admonition-color(var(--admonition-tip));
  }
  .admonition.admonition-success {
    @include admonition-color(var(--admonition-success));
  }
  .admonition.admonition-question {
    @include admonition-color(var(--admonition-question));
  }
  .admonition.admonition-warning {
    @include admonition-color(var(--admonition-warning));
  }
  .admonition.admonition-failure {
    @include admonition-color(var(--admonition-failure));
  }
  .admonition.admonition-danger {
    @include admonition-color(var(--admonition-danger));
  }
  .admonition.admonition-bug {
    @include admonition-color(var(--admonition-bug));
  }
  .admonition.admonition-example {
    @include admonition-color(var(--admonition-example));
  }
  .admonition.admonition-excerpt,
  .admonition.admonition-quote {
    @include admonition-color(var(--admonition-quote));
  }
  .admonition.admonition-reference {
    @include admonition-color(var(--admonition-reference));
  }
  .admonition.admonition-toc {
    @include admonition-color(var(--admonition-toc));
  }

  .callout {
    background-color: unset;
    border-left-width: 0.2rem;
  }
  .callout-content {
    background-color: var(--background-primary-alt);
    padding: 2px .5em 2px .8em;
  }
  .callout-title {
    background-color: rgba(var(--callout-color), 0.2);
  }
  .callout-title,
  .admonition-title {
    font-family: var(--font-callout-title);
    font-size: 1em;
  }
  .admonition-title-icon {
    font-family: var(--font-callout-title);
    min-width: .9em;
  }
  .admonition-content-holder .admonition-content {
    margin: 2px .5em;
    padding-left: .5em;
  }
  // ------------------------------------------------------
  // Reference Admonition
  // Create admonition of type 'reference' (book icon suggested)
  // ```ad-reference
  // Title:: Title of referenced thing
  // Source:: https://....
  // ```
  // ------------------------------------------------------
  .admonition-reference {
    .admonition-content {
      white-space: pre-line;
      font-family: var(--font-monospace);
      font-size: .7rem;
      color: var(--text-muted);
    }
    .admonition-content a.external-link {
      background-size: 10px;
    }
  }
  // ------------------------------------------------------
  // TOC Admonition
  // List with compressed padding that floats to the right
  // Create admonition of type 'toc' (outline icon suggested)
  // ```ad-toc
  // - List of links to document sections
  // ```
  // ------------------------------------------------------
  .callout[data-callout="toc"] {
    &.callout {
      float: right;
      margin-left: .5em;
      min-width: 150px;
    }
    .callout-content {
      padding-right: .5em;

      ul {
        display: block;
        margin-block-start: .5em;
        margin-block-end: .5em;
        margin-inline-start: 0px;
        margin-inline-end: 0px;
        padding-inline-start: 30px;
      }
    }
  }
  .admonition-toc {
    &.admonition {
      float: right;
      margin-left: .5em;
      min-width: 150px;
    }
    .admonition-content-holder {
      padding-right: .5em;
    }
    .admonition-content-holder .admonition-content ul {
      display: block;
      margin-block-start: .5em;
      margin-block-end: .5em;
      margin-inline-start: 0px;
      margin-inline-end: 0px;
      padding-inline-start: 30px;
    }
  }
}
div.popover {
  .admonition.admonition-toc {
    display: none;
  }
}

