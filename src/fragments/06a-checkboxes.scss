@charset "UTF-8";

@mixin custom-task-background($character, $rgb-color, $background, $font-weight: var(--font-normal), $text-decoration: none, $li-fg: var(--text-normal)) {
  li[data-task="#{$character}"] {
    --checkbox-color: #{$rgb-color};
    --checkbox-marker-color: transparent;
    --checklist-done-decoration: #{$text-decoration};
    color: $li-fg;

    > input[type=checkbox]:not(:checked) {
      background-color: unset;
      background: unset;
    }
    > input[type=checkbox]:checked {
      background: #{$background};
    }
    > input[type=checkbox]:checked:after {
      -webkit-mask-image: none;
      background: unset;
      content: ' ';
    }
  }
}

@mixin custom-task-text($character, $rgb-color, $emoji, $font-weight, $text-decoration, $li-fg: var(--text-normal)) {
  div[data-task="#{$character}"],
  li[data-task="#{$character}"] {
    --checkbox-color: #{$rgb-color};
    --checkbox-marker-color: transparent;
    color: $li-fg;
    text-decoration: $text-decoration;

    input[type=checkbox]:not(:checked) {
      background-color: unset;
      background: unset;
    }
    input[type=checkbox]:checked {
      background-color: unset;
      background: unset;
    }
    input[type=checkbox]:checked:after {
      -webkit-mask-image: none;
      font-family: var(--font-monospace);
      background: unset;
      position: absolute;
      text-align: center;
      font-weight: $font-weight;
      font-size: var(--checkbox-size);
      line-height: var(--checkbox-size);
      color: var(--checkbox-color);
      top: -1px;
      left: -1px;
      right: 2px;
      content: '#{$emoji}';
    }
  }
}

@include custom-task-text("x", var(--checkbox-checked), "âœ“", var(--font-normal), none);
@include custom-task-text("-", var(--checkbox-cancelled), "-", var(--font-normal), line-through, var(--text-faint));
@include custom-task-text(">", var(--checkbox-deferred), ">", var(--font-normal), none);
@include custom-task-text("R", var(--checkbox-review), "ðŸ‘€", var(--font-normal), none);
@include custom-task-text("r", var(--checkbox-review), "ðŸ‘€", var(--font-normal), none);
@include custom-task-text("?", var(--checkbox-question), "?", var(--font-bold), none);
@include custom-task-text("!", var(--checkbox-important), "!", var(--font-extrabold), none, var(--checkbox-important));
@include custom-task-background("/", var(--checkbox-in-progress), "linear-gradient(135deg, transparent 50%, var(--checkbox-in-progress) 50%)");
